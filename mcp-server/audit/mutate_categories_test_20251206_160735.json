{
  "agent": "tool-mutate-categories",
  "timestamp": "2025-12-06T16:07:35.876700",
  "test_results": [
    {
      "test_case": "TC1",
      "status": "pass",
      "request": {
        "summary": "Valid Transfer Operation",
        "operations": [
          {
            "type": "transfer",
            "from_category": "Healthcare",
            "to_category": "Entertainment",
            "transfer_amount": 50
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: success, Updated 2 categories",
      "response": {
        "updated_categories": {
          "Healthcare": -566.1,
          "Entertainment": -4710.98
        },
        "change_summary": [
          {
            "message": "Transferred 50 from 'Healthcare' to 'Entertainment'. Healthcare: -616.10 \u2192 -566.10, Entertainment: -4660.98 \u2192 -4710.98. Net change: 0. (expense transfer: Healthcare +50 (less negative), Entertainment -50 (more negative))",
            "status": "success",
            "category": "Healthcare \u2192 Entertainment",
            "details": {
              "from_category": "Healthcare",
              "to_category": "Entertainment",
              "transfer_amount": 50.0,
              "from_old": -616.1,
              "from_new": -566.1,
              "to_old": -4660.98,
              "to_new": -4710.98,
              "net_change": 0
            }
          }
        ],
        "status": "success"
      },
      "initial_totals": {
        "Healthcare": -616.0999999999999,
        "Entertainment": -4660.98,
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27
      },
      "final_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": -566.1,
        "Entertainment": -4710.98
      },
      "initial_total": -2183.1699999999937,
      "final_total": -2183.169999999994,
      "notes": [
        "Zero-sum verified: net change = -4.547473508864641e-13"
      ]
    },
    {
      "test_case": "TC2",
      "status": "pass",
      "request": {
        "summary": "Transfer - Non-Existent Category",
        "operations": [
          {
            "type": "transfer",
            "from_category": "NonExistentCategory12345",
            "to_category": "AlsoNonExistent12345",
            "transfer_amount": 100
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: error, Updated 0 categories",
      "response": {
        "updated_categories": {},
        "change_summary": [
          {
            "message": "Source category 'NonExistentCategory12345' not found.",
            "status": "error",
            "category": "NonExistentCategory12345"
          }
        ],
        "status": "error"
      },
      "initial_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "final_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "initial_total": -2183.169999999994,
      "final_total": -2183.169999999994,
      "notes": [
        "Test passed"
      ]
    },
    {
      "test_case": "TC3",
      "status": "pass",
      "request": {
        "summary": "Transfer - Negative Amount",
        "operations": [
          {
            "type": "transfer",
            "from_category": "Healthcare",
            "to_category": "Entertainment",
            "transfer_amount": -100
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: error, Updated 0 categories",
      "response": {
        "updated_categories": {},
        "change_summary": [
          {
            "message": "Operation 1: 'transfer_amount' must be positive. Got -100. Use a positive value - sign handling is automatic.",
            "status": "error",
            "category": "Healthcare"
          }
        ],
        "status": "error"
      },
      "initial_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "final_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "initial_total": -2183.169999999994,
      "final_total": -2183.169999999994,
      "notes": [
        "Test passed"
      ]
    },
    {
      "test_case": "TC4",
      "status": "pass",
      "request": {
        "summary": "Transfer - Insufficient Amount",
        "operations": [
          {
            "type": "transfer",
            "from_category": "Healthcare",
            "to_category": "Entertainment",
            "transfer_amount": 16161.0
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: success, Updated 2 categories",
      "response": {
        "updated_categories": {
          "Healthcare": 15544.9,
          "Entertainment": -20821.98
        },
        "change_summary": [
          {
            "message": "Transferred 16161.0 from 'Healthcare' to 'Entertainment'. Healthcare: -616.10 \u2192 15544.90, Entertainment: -4660.98 \u2192 -20821.98. Net change: 0. (expense transfer: Healthcare +16161.0 (less negative), Entertainment -16161.0 (more negative))",
            "status": "success",
            "category": "Healthcare \u2192 Entertainment",
            "details": {
              "from_category": "Healthcare",
              "to_category": "Entertainment",
              "transfer_amount": 16161.0,
              "from_old": -616.1,
              "from_new": 15544.9,
              "to_old": -4660.98,
              "to_new": -20821.98,
              "net_change": 0
            }
          }
        ],
        "status": "success"
      },
      "initial_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "final_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": 15544.9,
        "Entertainment": -20821.98
      },
      "initial_total": -2183.169999999994,
      "final_total": -2183.1699999999946,
      "notes": [
        "Zero-sum verified: net change = -4.547473508864641e-13"
      ]
    },
    {
      "test_case": "TC5",
      "status": "pass",
      "request": {
        "summary": "Edit Operation - Valid",
        "operations": [
          {
            "type": "edit",
            "category": "Healthcare",
            "new_amount": -516.0999999999999,
            "note": "Adjusted amount"
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: success, Updated 1 categories",
      "response": {
        "updated_categories": {
          "Healthcare": -516.0999999999999
        },
        "change_summary": [
          {
            "message": "Updated category 'Healthcare': -616.10 \u2192 -516.0999999999999.",
            "status": "success",
            "category": "Healthcare",
            "details": {
              "category": "Healthcare",
              "old_amount": -616.1,
              "new_amount": -516.0999999999999
            }
          }
        ],
        "status": "success"
      },
      "initial_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "final_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -516.1
      },
      "initial_total": -2183.169999999994,
      "final_total": -2083.169999999994,
      "notes": [
        "Test passed"
      ]
    },
    {
      "test_case": "TC6",
      "status": "fail",
      "request": {
        "summary": "Edit - Invalid Category",
        "operations": [
          {
            "type": "edit",
            "category": "NonExistentCategory999",
            "new_amount": 1000
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: error, Updated 0 categories",
      "response": {
        "updated_categories": {},
        "change_summary": [
          {
            "message": "Month selection required to create new category 'NonExistentCategory999'.",
            "status": "error",
            "category": "NonExistentCategory999"
          }
        ],
        "status": "error"
      },
      "initial_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "final_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "initial_total": -2183.169999999994,
      "final_total": -2183.169999999994,
      "notes": [
        "Expected error containing 'not found', not found"
      ]
    },
    {
      "test_case": "TC7",
      "status": "fail",
      "request": {
        "summary": "Multiple Operations",
        "operations": [
          {
            "type": "transfer",
            "from_category": "Healthcare",
            "to_category": "Entertainment",
            "transfer_amount": 25
          },
          {
            "type": "edit",
            "category": "Travel",
            "new_amount": 500
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: success, Updated 3 categories",
      "response": {
        "updated_categories": {
          "Healthcare": -591.1,
          "Entertainment": -4685.98,
          "Travel": 500.0
        },
        "change_summary": [
          {
            "message": "Transferred 25 from 'Healthcare' to 'Entertainment'. Healthcare: -616.10 \u2192 -591.10, Entertainment: -4660.98 \u2192 -4685.98. Net change: 0. (expense transfer: Healthcare +25 (less negative), Entertainment -25 (more negative))",
            "status": "success",
            "category": "Healthcare \u2192 Entertainment",
            "details": {
              "from_category": "Healthcare",
              "to_category": "Entertainment",
              "transfer_amount": 25.0,
              "from_old": -616.1,
              "from_new": -591.1,
              "to_old": -4660.98,
              "to_new": -4685.98,
              "net_change": 0
            }
          },
          {
            "message": "Updated category 'Travel': -15998.19 \u2192 500.",
            "status": "success",
            "category": "Travel",
            "details": {
              "category": "Travel",
              "old_amount": -15998.19,
              "new_amount": 500.0
            }
          }
        ],
        "status": "success"
      },
      "initial_totals": {
        "Travel": -15998.190000000002,
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Entertainment": -4660.98,
        "Healthcare": -616.1
      },
      "final_totals": {
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": -591.1,
        "Entertainment": -4685.98,
        "Travel": 500.0
      },
      "initial_total": -2183.169999999994,
      "final_total": 14315.020000000008,
      "notes": [
        "Transfer should be zero-sum, but net change was 16498.190000000002"
      ]
    },
    {
      "test_case": "TC8",
      "status": "pass",
      "request": {
        "summary": "Empty Operations Array",
        "operations": [],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: error, Updated 0 categories",
      "response": {
        "updated_categories": {},
        "change_summary": [],
        "status": "error"
      },
      "initial_totals": {
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": -591.1,
        "Entertainment": -4685.98,
        "Travel": 500.0
      },
      "final_totals": {
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": -591.1,
        "Entertainment": -4685.98,
        "Travel": 500.0
      },
      "initial_total": 14315.020000000008,
      "final_total": 14315.020000000008,
      "notes": [
        "Test passed"
      ]
    },
    {
      "test_case": "TC9",
      "status": "pass",
      "request": {
        "summary": "Invalid Operation Type",
        "operations": [
          {
            "type": "delete",
            "category": "SomeCategory"
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: error, Updated 0 categories",
      "response": {
        "updated_categories": {},
        "change_summary": [
          {
            "message": "Operation 1: Invalid type 'delete'. Supported types: 'edit' (set absolute amount), 'transfer' (move amount between categories, zero-sum).",
            "status": "error",
            "category": "unknown"
          }
        ],
        "status": "error"
      },
      "initial_totals": {
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": -591.1,
        "Entertainment": -4685.98,
        "Travel": 500.0
      },
      "final_totals": {
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": -591.1,
        "Entertainment": -4685.98,
        "Travel": 500.0
      },
      "initial_total": 14315.020000000008,
      "final_total": 14315.020000000008,
      "notes": [
        "Test passed"
      ]
    },
    {
      "test_case": "TC10",
      "status": "pass",
      "request": {
        "summary": "Month/Bank Filtering",
        "operations": [
          {
            "type": "transfer",
            "from_category": "Healthcare",
            "to_category": "Entertainment",
            "transfer_amount": 10
          }
        ],
        "bank_name": "Santander Bank Polska S.A.",
        "month_year": "2025-09"
      },
      "response_summary": "Status: success, Updated 2 categories",
      "response": {
        "updated_categories": {
          "Healthcare": -581.1,
          "Entertainment": -4695.98
        },
        "change_summary": [
          {
            "message": "Transferred 10 from 'Healthcare' to 'Entertainment'. Healthcare: -591.10 \u2192 -581.10, Entertainment: -4685.98 \u2192 -4695.98. Net change: 0. (expense transfer: Healthcare +10 (less negative), Entertainment -10 (more negative))",
            "status": "success",
            "category": "Healthcare \u2192 Entertainment",
            "details": {
              "from_category": "Healthcare",
              "to_category": "Entertainment",
              "transfer_amount": 10.0,
              "from_old": -591.1,
              "from_new": -581.1,
              "to_old": -4685.98,
              "to_new": -4695.98,
              "net_change": 0
            }
          }
        ],
        "status": "success"
      },
      "initial_totals": {
        "Investments": 0.0,
        "Other": -284.07,
        "Income": 9250.41,
        "Food & Groceries": -4207.2,
        "Housing & Utilities": 0.0,
        "Debt Payments": -3407.13,
        "Internal Transfers": -4995.0,
        "Shopping": -1201.54,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Healthcare": -591.1,
        "Entertainment": -4685.98,
        "Travel": 500.0
      },
      "final_totals": {
        "Investments": 0.0,
        "Other": -284.07,
        "Income": 9250.41,
        "Food & Groceries": -4207.2,
        "Housing & Utilities": 0.0,
        "Debt Payments": -3407.13,
        "Internal Transfers": -4995.0,
        "Shopping": -1201.54,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Travel": 500.0,
        "Healthcare": -581.1,
        "Entertainment": -4695.98
      },
      "initial_total": -11584.529999999999,
      "final_total": -11584.529999999999,
      "notes": [
        "Zero-sum verified: net change = 0.0"
      ]
    },
    {
      "test_case": "TC11",
      "status": "pass",
      "request": {
        "summary": "Response Structure Validation",
        "operations": [
          {
            "type": "edit",
            "category": "Healthcare",
            "new_amount": -616.0999999999999
          }
        ],
        "bank_name": null,
        "month_year": null
      },
      "response_summary": "Status: success, Updated 1 categories",
      "response": {
        "updated_categories": {
          "Healthcare": -616.0999999999999
        },
        "change_summary": [
          {
            "message": "Updated category 'Healthcare': -591.10 \u2192 -616.0999999999999.",
            "status": "success",
            "category": "Healthcare",
            "details": {
              "category": "Healthcare",
              "old_amount": -591.1,
              "new_amount": -616.0999999999999
            }
          }
        ],
        "status": "success"
      },
      "initial_totals": {
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Travel": 500.0,
        "Entertainment": -4685.98,
        "Healthcare": -591.1
      },
      "final_totals": {
        "Investments": -10137.31,
        "Other": -491.34000000000003,
        "Income": 50917.21000000001,
        "Food & Groceries": -11000.779999999999,
        "Housing & Utilities": -175.0,
        "Debt Payments": -10273.92,
        "Internal Transfers": 10455.0,
        "Shopping": -8238.84,
        "Insurance": -583.65,
        "Transportation": -1379.27,
        "Travel": 500.0,
        "Entertainment": -4685.98,
        "Healthcare": -616.1
      },
      "initial_total": 14315.020000000008,
      "final_total": 14290.020000000008,
      "notes": [
        "Test passed"
      ]
    }
  ],
  "findings": [],
  "operation_coverage": {
    "transfer_tested": true,
    "edit_tested": true,
    "multiple_ops_tested": true,
    "error_handling_tested": true
  }
}