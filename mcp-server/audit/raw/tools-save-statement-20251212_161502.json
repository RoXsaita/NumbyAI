{
  "executor": "tool-save-statement",
  "run_id": "20251212_161502",
  "timestamp": "2026-01-01T14:16:18.398436+00:00",
  "test_results": [
    {
      "case": "TC1",
      "status": "fail",
      "parameters_summary": "Valid reconciled data",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    },
    {
      "case": "TC2",
      "status": "fail",
      "parameters_summary": "Category totals: 2000, statement_net_flow: 5000 (150% mismatch)",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    },
    {
      "case": "TC3",
      "status": "fail",
      "parameters_summary": "Category totals: 3000, statement_net_flow: 3072 (2.4% mismatch)",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    },
    {
      "case": "TC4",
      "status": "fail",
      "parameters_summary": "Category totals: 3000, statement_net_flow: 3078 (2.6% mismatch)",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    },
    {
      "case": "TC5",
      "status": "fail",
      "parameters_summary": "Invalid category name",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    },
    {
      "case": "TC6",
      "status": "fail",
      "parameters_summary": "Empty category summaries array",
      "response_summary": "Error: No category summaries provided\n\nPlease follow the instructions in the save_statement_summary tool contracts as follows:\n\nSAVE_STATEMENT_SUMMARY workflow:\n1. IMMEDIATELY once statement + Net amount is received, fetch preferences for parsing and categorization\n2. Reverse engineer the statement to understand the format based on bank conventions and derive the net flow amount from the statement.\n3. Ensure you can view the full, non-truncated descriptions and vendor fields from the CSV before categorizing.\n4. CRITICAL: Assigning categories is the most complex step in the workflow. Break down the task into smaller steps and execute each step in detail.\n   - FIRST TIME SETUP: Assign every single transaction in the statement with categorization rules as your reference.\n   - USER WITH EXISTING CATEGORIZATION PREFERENCES: USE RULES AND APPLY FUZZY VLOOKUP TO THE STATEMENT THEN MANUALLY CATEGORIZE THE REST.\n5. Use Python fuzzy matching/regex to map vendors and descriptions to categories.\n6. Create pivot table using panda and numpy to aggregate the data by category as rows and months as columns. Include grand totals in the pivot table.\n7. Match grand total with the NET FLOW Provided by the user. If there is <2.5% difference, plug the difference into \"Other\" category and explain the discrepancy to the user.\n8. Before you run the save_statement_summary tool, check if the 'other' category represents more than 40% of the total. If yes, re-assess your categorization, and consider asking the user for additional details.\n9. Save the monthly summary via save_statement_summary\n10. Call get_financial_data to render the dashboard.\n11. Summarise the highest 3-4 transactinos per category for the user (or very high lvl insight if its high volume transactions of a specific category)\n12. Confirm if the user is happy with the categorization preferences.",
      "notes": ""
    },
    {
      "case": "TC7",
      "status": "pass",
      "parameters_summary": "Missing bank_name parameter",
      "response_summary": "Correctly rejected missing bank_name",
      "notes": ""
    },
    {
      "case": "TC8",
      "status": "fail",
      "parameters_summary": "Invalid date format (MM/DD/YYYY instead of YYYY-MM-DD)",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    },
    {
      "case": "TC9",
      "status": "fail",
      "parameters_summary": "Include statement_insights parameter",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    },
    {
      "case": "TC10",
      "status": "fail",
      "parameters_summary": "Currency handling with EUR",
      "response_summary": "Error: User settings not found. Complete onboarding first.",
      "notes": ""
    }
  ],
  "reconciliation_tests": {
    "valid_save_works": false,
    "rejects_large_mismatch": true,
    "boundary_2_4_passes": false,
    "boundary_2_6_fails": true
  },
  "findings": [
    {
      "id": 1,
      "priority": "P1",
      "component": "save_statement_summary",
      "summary": "Valid reconciled save failed",
      "problem": "Should accept valid reconciled data",
      "expected": "Saved: 3",
      "actual": "Saved: 0",
      "solution": ""
    },
    {
      "id": 2,
      "priority": "P1",
      "component": "save_statement_summary",
      "summary": "Large mismatch not rejected",
      "problem": "Should reject large reconciliation mismatch",
      "expected": "kind: reconciliation_error",
      "actual": "Response: onboarding_required",
      "solution": ""
    },
    {
      "id": 3,
      "priority": "P2",
      "component": "save_statement_summary",
      "summary": "2.4% mismatch incorrectly rejected",
      "problem": "Should accept mismatch within 2.5% tolerance",
      "expected": "kind: save_result",
      "actual": "Response: onboarding_required",
      "solution": ""
    },
    {
      "id": 4,
      "priority": "P2",
      "component": "save_statement_summary",
      "summary": "2.6% mismatch incorrectly accepted",
      "problem": "Should reject mismatch exceeding 2.5% tolerance",
      "expected": "kind: reconciliation_error",
      "actual": "Response: onboarding_required",
      "solution": ""
    },
    {
      "id": 5,
      "priority": "P1",
      "component": "save_statement_summary",
      "summary": "Invalid category validation missing",
      "problem": "Should reject invalid category names",
      "expected": "Error mentioning 'Invalid category'",
      "actual": "Error: User settings not found. Complete onboarding first.",
      "solution": ""
    },
    {
      "id": 6,
      "priority": "P2",
      "component": "save_statement_summary",
      "summary": "Invalid date format validation unclear",
      "problem": "Should clearly indicate expected date format",
      "expected": "Error mentioning YYYY-MM-DD format",
      "actual": "Error: User settings not found. Complete onboarding first.",
      "solution": ""
    },
    {
      "id": 7,
      "priority": "P2",
      "component": "save_statement_summary",
      "summary": "Failed to save with statement insights",
      "problem": "Should accept statement_insights parameter",
      "expected": "kind: save_result",
      "actual": "Response: onboarding_required",
      "solution": ""
    },
    {
      "id": 8,
      "priority": "P2",
      "component": "save_statement_summary",
      "summary": "EUR currency handling failed",
      "problem": "Should handle EUR currency without conversion errors",
      "expected": "kind: save_result",
      "actual": "Response: onboarding_required",
      "solution": ""
    }
  ],
  "summary": {
    "total_tests": 10,
    "passed": 1,
    "failed": 9,
    "errors": 0
  },
  "checklist_complete": true
}